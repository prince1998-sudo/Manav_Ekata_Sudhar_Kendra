<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>HUSRC Member Dashboard</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
<link href="dashboard.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

</head>
<body>
<div class="header-container">
  <div class="logo-container">
    <img src="logo of sastha nepal.jpg" alt="Human Unity Social Reform Center" class="logo" />
    <span class="logo-text">HUSRC Nepal</span>
  </div>

  <div class="button-group">
  <a href="id-card.html" target="_blank" class="action-btn">View ID Card</a>
  <button class="action-btn" onclick="logout()">
    <i class="fas fa-sign-out-alt"></i> Logout
  </button>
</div>
  </div>
</div>



  <!-- Main Sections -->
  <div class="main-section">
    <!-- Left Section -->
<div class="left-section">
<div class="profile">
  <div class="profile-progress">
<svg viewBox="0 0 36 36" class="circular-chart blue">
  <path class="circle-bg"
    d="M18 2.0845
      a 15.9155 15.9155 0 0 1 0 31.831
      a 15.9155 15.9155 0 0 1 0 -31.831"
  />
  <path class="circle"
    stroke-dasharray="0, 100"
    d="M18 2.0845
      a 15.9155 15.9155 0 0 1 0 31.831
      a 15.9155 15.9155 0 0 1 0 -31.831"
  />
  <text x="18" y="20.35" class="percentage">0%</text>
</svg>
</div>

  <div class="profile-img-container" onclick="toggleProfileOptions()">
    <img src="profile.jpg" alt="Profile Photo" id="profilePic" />
    <div class="profile-options" id="profileOptions">
      <button onclick="document.getElementById('fileInput').click()">Update Photo</button>
      <button onclick="deletePhoto()">Delete Photo</button>
    </div>
    <input type="file" id="fileInput" accept="image/*" onchange="changeProfilePhoto(event)" />
  </div>
  <h2>Welcome, <span id="firstName" class="editable" contenteditable="true" oninput="saveUserData()">Your Name</span></h2>
</div>
<div class="user-info">
  <p><strong>Last Name:</strong> <span id="lastName" class="editable" contenteditable="true" oninput="saveUserData()">-</span></p>
  <p><strong>Gender:</strong> <span id="Gender" class="editable" contenteditable="true" oninput="saveUserData()">-</span></p>
  <p><strong>Phone:</strong> <span id="phone" class="editable" contenteditable="true" oninput="saveUserData()">-</span></p>
  <p><strong>Email:</strong> <span id="email" class="editable" contenteditable="true" oninput="saveUserData()">-</span></p>
  <p><strong>Date of Birth:</strong> <span id="dob" class="editable" contenteditable="true" oninput="saveUserData()">-</span></p>
</div>
</div>

    <!-- Right Section -->
    <div class="right-section">
      <div class="form-group">
        <label for="hobbies">Hobbies</label>
        <textarea id="hobbies" rows="2" placeholder="e.g., Reading, Traveling" oninput="showBioSaveBtn()"></textarea>
      </div>
      <div class="form-group">
        <label for="interests">Interests</label>
        <textarea id="interests" rows="2" placeholder="e.g., Technology, Environment" oninput="showBioSaveBtn()"></textarea>
      </div>
      <div class="form-group">
        <label for="lifeStory">Life Story</label>
        <textarea id="lifeStory" rows="4" placeholder="Write a few words about yourself..." oninput="showBioSaveBtn()"></textarea>
      </div>
      <button id="saveBioBtn" onclick="saveBio()">Save Bio</button>
       
    </div>
  </div>
</div>

<script>
function logout() {
  alert("Logging out...");
  window.location.href = 'index.html';
}

function toggleProfileOptions() {
  const options = document.getElementById("profileOptions");
  options.style.display = options.style.display === "block" ? "none" : "block";
}

function changeProfilePhoto(event) {
  const file = event.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = function (e) {
      document.getElementById("profilePic").src = e.target.result;
      document.getElementById("profileOptions").style.display = "none";
    };
    reader.readAsDataURL(file);
  }
}

function deletePhoto() {
  document.getElementById("profilePic").src = "default-profile.png";
  document.getElementById("profileOptions").style.display = "none";
}

document.addEventListener("click", function (event) {
  const container = document.querySelector(".profile-img-container");
  if (!container.contains(event.target)) {
    document.getElementById("profileOptions").style.display = "none";
  }
});

function showBioSaveBtn() {
  document.getElementById("saveBioBtn").style.display = "inline-block";
}

function saveBio() {
  localStorage.setItem("hobbies", document.getElementById("hobbies").value);
  localStorage.setItem("interests", document.getElementById("interests").value);
  localStorage.setItem("lifeStory", document.getElementById("lifeStory").value);
  document.getElementById("saveBioBtn").style.display = "none";
  alert("Bio saved!");
  updateProfileProgress();
}

function saveUserData() {
  const fields = ["firstName", "lastName", "Gender", "phone", "email", "dob"];
  fields.forEach((id) => {
    localStorage.setItem(id, document.getElementById(id).innerText);
  });
  updateProfileProgress();
}

function loadUserData() {
  const fields = ["firstName", "lastName", "Gender", "phone", "email", "dob"];
  fields.forEach((id) => {
    const value = localStorage.getItem(id);
    if (value) document.getElementById(id).innerText = value;
  });

  document.getElementById("hobbies").value = localStorage.getItem("hobbies") || "";
  document.getElementById("interests").value = localStorage.getItem("interests") || "";
  document.getElementById("lifeStory").value = localStorage.getItem("lifeStory") || "";
}

function updateProfileProgress() {
  const fields = [
    "firstName",
    "lastName",
    "Gender",
    "phone",
    "email",
    "dob",
    "hobbies",
    "interests",
    "lifeStory",
  ];

  let filled = 0;
  fields.forEach((id) => {
    const el = document.getElementById(id);
    const value = el?.value || el?.innerText || "";
    if (value.trim().length > 0) filled++;
  });

  const percentage = Math.round((filled / fields.length) * 100);
  const circle = document.querySelector(".circle");
  const text = document.querySelector(".percentage");
  const dashArray = `${percentage}, 100`;

  circle.setAttribute("stroke-dasharray", dashArray);
  text.textContent = `${percentage}%`;
}

// Call once everything is loaded
window.onload = function () {
  loadUserData();
  updateProfileProgress();

  const watchFields = [
    "firstName",
    "lastName",
    "Gender",
    "phone",
    "email",
    "dob",
    "hobbies",
    "interests",
    "lifeStory",
  ];

  watchFields.forEach((id) => {
    const el = document.getElementById(id);
    if (el) {
      if (el.tagName === "TEXTAREA") {
        el.addEventListener("input", updateProfileProgress);
      } else {
        el.addEventListener("input", saveUserData);
      }
    }
  });
};
</script>
<script>
  document.getElementById("profilePicInput").addEventListener("change", function(event) {
  const file = event.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = function(e) {
      const base64Image = e.target.result;
      localStorage.setItem("profilePic", base64Image); // Save to localStorage
      document.getElementById("profilePic").src = base64Image; // Show preview
    };
    reader.readAsDataURL(file);
  }
});
</script>

</body>
</html>
